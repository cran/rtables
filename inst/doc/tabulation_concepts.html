<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Adrian Waddell" />


<title>Tabulation Concepts</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Tabulation Concepts</h1>
<h4 class="author">Adrian Waddell</h4>
<h4 class="date">6/12/2020</h4>



<style type="text/css">
.reveal .r code {
    white-space: pre;
}
</style>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>In this vignette we will introduce some theory behind using layouts for table creation. Much of the theory also holds true when using</p>
<p>For this vignette we will use the following packages:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(tibble)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(rtables)</a></code></pre></div>
<p>The data we use is the following one created with random number generators:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">add_subgroup &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">paste0</span>(<span class="kw">tolower</span>(x), <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw">length</span>(x), <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="dt">x =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>),</a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="dt">c1 =</span> <span class="kw">factor</span>(<span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)),</a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="dt">r1 =</span> <span class="kw">factor</span>(<span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;U&quot;</span>, <span class="st">&quot;V&quot;</span>, <span class="st">&quot;W&quot;</span>), <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;U&quot;</span>, <span class="st">&quot;V&quot;</span>, <span class="st">&quot;W&quot;</span>))</a>
<a class="sourceLine" id="cb2-9" title="9">) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="dt">c2 =</span> <span class="kw">add_subgroup</span>(c1),</a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="dt">r2 =</span> <span class="kw">add_subgroup</span>(r1),</a>
<a class="sourceLine" id="cb2-13" title="13">    <span class="dt">y =</span> <span class="kw">as.numeric</span>(<span class="dv">2</span><span class="op">*</span><span class="kw">as.numeric</span>(c1) <span class="op">-</span><span class="st"> </span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span><span class="kw">as.numeric</span>(r1))</a>
<a class="sourceLine" id="cb2-14" title="14">  ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(c1, c2, r1, r2, x, y)</a>
<a class="sourceLine" id="cb2-15" title="15"></a>
<a class="sourceLine" id="cb2-16" title="16">df</a></code></pre></div>
<pre><code># A tibble: 100 x 6
   c1    c2    r1    r2         x     y
   &lt;fct&gt; &lt;chr&gt; &lt;fct&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 B     b2    U     u3    -0.626     1
 2 A     a3    V     v2     0.184    -4
 3 B     b1    V     v2    -0.836    -2
 4 B     b3    V     v2     1.60     -2
 5 B     b1    U     u1     0.330     1
 6 C     c1    U     u3    -0.820     3
 7 A     a3    U     u3     0.487    -1
 8 B     b1    U     u3     0.738     1
 9 C     c3    V     v2     0.576     0
10 C     c3    U     u2    -0.305     3
# … with 90 more rows</code></pre>
</div>
<div id="building-a-table-row-by-row" class="section level2">
<h2>Building A Table Row By Row</h2>
<p>Let’s look at a table that has 3 columns and 3 rows. Each row represents a different analysis (functions <code>foo</code>, <code>bar</code>, <code>zoo</code> that return an <code>rcell</code> object):</p>
<pre><code>                     A         B         C
------------------------------------------------
foo_label        foo(df_A)  foo(df_B)  foo(df_C)
bar_label        bar(df_A)  bar(df_B)  bar(df_C)
zoo_label        zoo(df_A)  zoo(df_B)  zoo(df_C)</code></pre>
<p>The data passed to the analysis functions are a subset defined by the respective column and:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">df_A &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(c1 <span class="op">==</span><span class="st"> &quot;A&quot;</span>)</a>
<a class="sourceLine" id="cb5-2" title="2">df_B &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(c1 <span class="op">==</span><span class="st"> &quot;B&quot;</span>)</a>
<a class="sourceLine" id="cb5-3" title="3">df_C &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(c1 <span class="op">==</span><span class="st"> &quot;C&quot;</span>)</a></code></pre></div>
<p>Let’s do this on the concrete data with <code>analyze</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">foo &lt;-<span class="st"> </span>prod</a>
<a class="sourceLine" id="cb6-2" title="2">bar &lt;-<span class="st"> </span>sum</a>
<a class="sourceLine" id="cb6-3" title="3">zoo &lt;-<span class="st"> </span>mean</a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, <span class="cf">function</span>(df) <span class="kw">foo</span>(df<span class="op">$</span>x), <span class="dt">var_labels =</span> <span class="st">&quot;foo label&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, <span class="cf">function</span>(df) <span class="kw">bar</span>(df<span class="op">$</span>x), <span class="dt">var_labels =</span> <span class="st">&quot;bar label&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, <span class="cf">function</span>(df) <span class="kw">zoo</span>(df<span class="op">$</span>x), <span class="dt">var_labels =</span> <span class="st">&quot;zoo label&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.</code></pre>
<pre><code>               A      B      C  
--------------------------------
foo label                       
  foo label    0      0      0  
bar label                       
  bar label   1.87   4.37   4.64
zoo label                       
  zoo label   0.05   0.13   0.18</code></pre>
<p>of if we wanted the <code>x</code> variable instead of the data frame:</p>
<pre><code>                     A         B         C
------------------------------------------------
foo_label        foo(x_A)  foo(x_B)  foo(x_C)
bar_label        bar(x_A)  bar(x_B)  bar(x_C)
zoo_label        zoo(x_A)  zoo(x_B)  zoo(x_C)</code></pre>
<p>where</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">x_A &lt;-<span class="st"> </span>df_A<span class="op">$</span>x</a>
<a class="sourceLine" id="cb10-2" title="2">x_B &lt;-<span class="st"> </span>df_B<span class="op">$</span>x</a>
<a class="sourceLine" id="cb10-3" title="3">x_C &lt;-<span class="st"> </span>df_C<span class="op">$</span>x</a></code></pre></div>
<p>The function passed to <code>afun</code> is evaluated using argument matching, if <code>afun</code> has an argument <code>x</code> the analysis variable specified in <code>vars</code> in <code>analyze</code> is passed to the function and if <code>afun</code> has an argument <code>df</code> then set subset of the dataset is passed to <code>afun</code>. So,</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, foo, <span class="dt">var_labels =</span> <span class="st">&quot;foo label&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, bar, <span class="dt">var_labels =</span> <span class="st">&quot;bar label&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, zoo, <span class="dt">var_labels =</span> <span class="st">&quot;zoo label&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.</code></pre>
<pre><code>             A      B      C  
------------------------------
foo label                     
  foo        0      0      0  
bar label                     
  bar       1.87   4.37   4.64
zoo label                     
  zoo       0.05   0.13   0.18</code></pre>
<p>Note that it is also possible that a function returns multiple rows with <code>in_rows</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, <span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb14-4" title="4">    <span class="kw">in_rows</span>(</a>
<a class="sourceLine" id="cb14-5" title="5">      <span class="st">&quot;row 1&quot;</span> =<span class="st"> </span><span class="kw">rcell</span>(<span class="kw">mean</span>(x), <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>),</a>
<a class="sourceLine" id="cb14-6" title="6">      <span class="st">&quot;row 2&quot;</span> =<span class="st"> </span><span class="kw">rcell</span>(<span class="kw">sd</span>(x), <span class="dt">format =</span> <span class="st">&quot;xx.xxx&quot;</span>)</a>
<a class="sourceLine" id="cb14-7" title="7">    )</a>
<a class="sourceLine" id="cb14-8" title="8">  }, <span class="dt">var_labels =</span> <span class="st">&quot;foo label&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, <span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb14-10" title="10">    <span class="kw">in_rows</span>(</a>
<a class="sourceLine" id="cb14-11" title="11">      <span class="st">&quot;more rows 1&quot;</span> =<span class="st">  </span><span class="kw">rcell</span>(<span class="kw">median</span>(x), <span class="dt">format =</span> <span class="st">&quot;xx.x&quot;</span>),</a>
<a class="sourceLine" id="cb14-12" title="12">      <span class="st">&quot;even more rows 1&quot;</span> =<span class="st"> </span><span class="kw">rcell</span>(<span class="kw">IQR</span>(x), <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>)</a>
<a class="sourceLine" id="cb14-13" title="13">    )</a>
<a class="sourceLine" id="cb14-14" title="14">  }, <span class="dt">var_labels =</span> <span class="st">&quot;bar label&quot;</span>, <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.</code></pre>
<pre><code>                       A       B      C  
-----------------------------------------
foo label                                
  row 1              0.05    0.13    0.18
  row 2              0.985   0.815   0.89
bar label                                
  more rows 1          0      0.2    0.3 
  even more rows 1    1.2    1.15    1.16</code></pre>
<p>which is how we recommend to specify the row names explicitly.</p>
</div>
<div id="tabulation-with-row-structure" class="section level2">
<h2>Tabulation With Row Structure</h2>
<p>Let’s say we would like to create the following table:</p>
<pre><code>            A         B         C
--------------------------------------
U        foo(df_UA)  foo(df_UB)  foo(df_UC)
V        foo(df_VA)  foo(df_VB)  foo(df_VC)
W        foo(df_WA)  foo(df_WB)  foo(df_WC)</code></pre>
<p>where <code>df_*</code> are subsets of <code>df</code> as follows:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">df_UA &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;U&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;A&quot;</span>)</a>
<a class="sourceLine" id="cb18-2" title="2">df_VA &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;V&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;A&quot;</span>)</a>
<a class="sourceLine" id="cb18-3" title="3">df_WA &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;W&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;A&quot;</span>)</a>
<a class="sourceLine" id="cb18-4" title="4">df_UB &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;U&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;B&quot;</span>)</a>
<a class="sourceLine" id="cb18-5" title="5">df_VB &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;V&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;B&quot;</span>)</a>
<a class="sourceLine" id="cb18-6" title="6">df_WB &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;W&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;C&quot;</span>)</a>
<a class="sourceLine" id="cb18-7" title="7">df_UC &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;U&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;C&quot;</span>)</a>
<a class="sourceLine" id="cb18-8" title="8">df_VC &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;V&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;C&quot;</span>)</a>
<a class="sourceLine" id="cb18-9" title="9">df_WC &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;W&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;C&quot;</span>)</a></code></pre></div>
<p>further note that <code>df_*</code> are of the same class as <code>df</code>, i.e. <code>tibble</code>s. Hence <code>foo</code> aggregates the subset of our data to a cell value.</p>
<p>Given a function <code>foo</code> (ignore the <code>...</code> for now):</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">foo &lt;-<span class="st"> </span><span class="cf">function</span>(df, <span class="dt">labelstr =</span> <span class="st">&quot;&quot;</span>, ...) {</a>
<a class="sourceLine" id="cb19-2" title="2">  <span class="kw">paste</span>(<span class="kw">dim</span>(df), <span class="dt">collapse =</span> <span class="st">&quot; x &quot;</span>)</a>
<a class="sourceLine" id="cb19-3" title="3">}</a></code></pre></div>
<p>we can start calculating the cell values individually:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">foo</span>(df_UA)</a></code></pre></div>
<pre><code>[1] &quot;17 x 6&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">foo</span>(df_VA)</a></code></pre></div>
<pre><code>[1] &quot;9 x 6&quot;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">foo</span>(df_WA)</a></code></pre></div>
<pre><code>[1] &quot;14 x 6&quot;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">foo</span>(df_UB)</a></code></pre></div>
<pre><code>[1] &quot;13 x 6&quot;</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">foo</span>(df_VB)</a></code></pre></div>
<pre><code>[1] &quot;15 x 6&quot;</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">foo</span>(df_WB)</a></code></pre></div>
<pre><code>[1] &quot;11 x 6&quot;</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">foo</span>(df_UC)</a></code></pre></div>
<pre><code>[1] &quot;10 x 6&quot;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">foo</span>(df_VC)</a></code></pre></div>
<pre><code>[1] &quot;5 x 6&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">foo</span>(df_WC)</a></code></pre></div>
<pre><code>[1] &quot;11 x 6&quot;</code></pre>
<p>Now we are still missing the table structure:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">matrix</span>(</a>
<a class="sourceLine" id="cb38-2" title="2">  <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb38-3" title="3">    <span class="kw">foo</span>(df_UA),</a>
<a class="sourceLine" id="cb38-4" title="4">    <span class="kw">foo</span>(df_VA),</a>
<a class="sourceLine" id="cb38-5" title="5">    <span class="kw">foo</span>(df_WA),</a>
<a class="sourceLine" id="cb38-6" title="6">    <span class="kw">foo</span>(df_UB),</a>
<a class="sourceLine" id="cb38-7" title="7">    <span class="kw">foo</span>(df_VB),</a>
<a class="sourceLine" id="cb38-8" title="8">    <span class="kw">foo</span>(df_WB),</a>
<a class="sourceLine" id="cb38-9" title="9">    <span class="kw">foo</span>(df_UC),</a>
<a class="sourceLine" id="cb38-10" title="10">    <span class="kw">foo</span>(df_VC),</a>
<a class="sourceLine" id="cb38-11" title="11">    <span class="kw">foo</span>(df_WC)</a>
<a class="sourceLine" id="cb38-12" title="12">  ), </a>
<a class="sourceLine" id="cb38-13" title="13">  <span class="dt">byrow =</span> <span class="ot">FALSE</span>, <span class="dt">ncol =</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb38-14" title="14">)</a></code></pre></div>
<pre><code>     [,1]     [,2]     [,3]    
[1,] &quot;17 x 6&quot; &quot;13 x 6&quot; &quot;10 x 6&quot;
[2,] &quot;9 x 6&quot;  &quot;15 x 6&quot; &quot;5 x 6&quot; 
[3,] &quot;14 x 6&quot; &quot;11 x 6&quot; &quot;11 x 6&quot;</code></pre>
<p>In <code>rtables</code> this type of tabulation is done with <code>layouts</code></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-2" title="2"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-3" title="3"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-4" title="4"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, foo) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-5" title="5"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>          A        B        C   
--------------------------------
U                               
  foo   17 x 6   13 x 6   10 x 6
V                               
  foo   9 x 6    15 x 6   5 x 6 
W                               
  foo   14 x 6   6 x 6    11 x 6</code></pre>
<p>or if we would not want to see the <code>foo</code> label we would have to use</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-2" title="2"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-3" title="3"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-4" title="4"><span class="st">  </span><span class="kw">summarize_row_groups</span>(<span class="dt">cfun =</span> foo, <span class="dt">format =</span> <span class="st">&quot;xx&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-5" title="5"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>     A        B        C   
---------------------------
   17 x 6   13 x 6   10 x 6
   9 x 6    15 x 6   5 x 6 
   14 x 6   6 x 6    11 x 6</code></pre>
<p>but now the row labels disapered. This is because <code>cfun</code> needs to define it’s row label. So let’s redefine <code>foo</code>:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1">foo &lt;-<span class="st"> </span><span class="cf">function</span>(df, labelstr) {</a>
<a class="sourceLine" id="cb44-2" title="2">  <span class="kw">rcell</span>(<span class="kw">paste</span>(<span class="kw">dim</span>(df), <span class="dt">collapse =</span> <span class="st">&quot; x &quot;</span>), <span class="dt">format =</span> <span class="st">&quot;xx&quot;</span>, <span class="dt">label =</span> labelstr)</a>
<a class="sourceLine" id="cb44-3" title="3">}</a>
<a class="sourceLine" id="cb44-4" title="4"></a>
<a class="sourceLine" id="cb44-5" title="5"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-6" title="6"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-7" title="7"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-8" title="8"><span class="st">  </span><span class="kw">summarize_row_groups</span>(<span class="dt">cfun =</span> foo) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-9" title="9"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>      A        B        C   
----------------------------
U   17 x 6   13 x 6   10 x 6
V   9 x 6    15 x 6   5 x 6 
W   14 x 6   6 x 6    11 x 6</code></pre>
<div id="calculating-the-mean" class="section level3">
<h3>Calculating the Mean</h3>
<p>For lets calculate the mean of <code>df$y</code> for pattern I.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1">foo &lt;-<span class="st"> </span><span class="cf">function</span>(df, labelstr) {</a>
<a class="sourceLine" id="cb46-2" title="2">  <span class="kw">rcell</span>(<span class="kw">mean</span>(df<span class="op">$</span>y), <span class="dt">label =</span> labelstr, <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>)</a>
<a class="sourceLine" id="cb46-3" title="3">}</a>
<a class="sourceLine" id="cb46-4" title="4"></a>
<a class="sourceLine" id="cb46-5" title="5"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-6" title="6"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-7" title="7"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-8" title="8"><span class="st">  </span><span class="kw">summarize_row_groups</span>(<span class="dt">cfun =</span> foo) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-9" title="9"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>    A    B    C 
----------------
U   -1   1    3 
V   -4   -2   0 
W   -7   -5   -3</code></pre>
<p>Note that <code>foo</code> has the variable information hard encoded in the function body. Let’s try some alternatives returning to <code>analyze</code>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-2" title="2"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-3" title="3"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-4" title="4"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;y&quot;</span>, <span class="dt">afun =</span> mean) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-5" title="5"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>         A    B    C 
---------------------
U                    
  mean   -1   1    3 
V                    
  mean   -4   -2   0 
W                    
  mean   -7   -5   -3</code></pre>
<p>note that the subset of the <code>y</code> variable is passed as <code>x</code> argument to <code>mean</code>. We could also get the <code>data.frame</code> instead of the variable:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-2" title="2"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-3" title="3"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-4" title="4"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;y&quot;</span>, <span class="dt">afun =</span> <span class="cf">function</span>(df) <span class="kw">mean</span>(df<span class="op">$</span>y)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-5" title="5"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>      A    B    C 
------------------
U                 
  y   -1   1    3 
V                 
  y   -4   -2   0 
W                 
  y   -7   -5   -3</code></pre>
<p>which is in contrast to:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb52-2" title="2"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb52-3" title="3"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb52-4" title="4"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;y&quot;</span>, <span class="dt">afun =</span> <span class="cf">function</span>(x) <span class="kw">mean</span>(x)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb52-5" title="5"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>      A    B    C 
------------------
U                 
  y   -1   1    3 
V                 
  y   -4   -2   0 
W                 
  y   -7   -5   -3</code></pre>
<p>where the function receives the subset of <code>y</code>.</p>
</div>
<div id="group-summaries" class="section level3">
<h3>Group Summaries</h3>
<p>Pattern I is an interesting one as we can add more row structure (with further splits). Consider the following table:</p>
<pre><code>            A         B         C
--------------------------------------
U        
  u1     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  u2     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  u3     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
V 
  v1     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  v2     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  v3     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
W
  w1     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  w2     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)
  w3     foo(&lt;&gt;)  foo(&lt;&gt;)  foo(&lt;&gt;)</code></pre>
<p>where <code>&lt;&gt;</code> represents the data that is represented by the cell. So for the cell <code>U &gt; u1, A</code> we would have the subset:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="st">  </span><span class="kw">filter</span>(r1 <span class="op">==</span><span class="st"> &quot;U&quot;</span>, r2 <span class="op">==</span><span class="st"> &quot;u1&quot;</span>, c1 <span class="op">==</span><span class="st"> &quot;A&quot;</span>)</a></code></pre></div>
<pre><code># A tibble: 2 x 6
  c1    c2    r1    r2        x     y
  &lt;fct&gt; &lt;chr&gt; &lt;fct&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A     a2    U     u1    1.12     -1
2 A     a1    U     u1    0.594    -1</code></pre>
<p>and so on. We can get this table as follows:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-2" title="2"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-3" title="3"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-4" title="4"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r2&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb57-5" title="5"><span class="st">  </span><span class="kw">summarize_row_groups</span>(<span class="dt">cfun =</span> <span class="cf">function</span>(df, labelstr) {</a>
<a class="sourceLine" id="cb57-6" title="6">    <span class="kw">rcell</span>(<span class="kw">mean</span>(df<span class="op">$</span>x), <span class="dt">format =</span> <span class="st">&quot;xx.xx&quot;</span>, <span class="dt">label =</span> <span class="kw">paste</span>(<span class="st">&quot;mean x for&quot;</span>, labelstr))</a>
<a class="sourceLine" id="cb57-7" title="7">  }) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-8" title="8"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>                    A       B       C  
---------------------------------------
U                                      
  mean x for u3   -0.04   0.36    -0.25
  mean x for u1   0.86    0.32     NaN 
  mean x for u2   -0.28   0.38    0.08 
V                                      
  mean x for v2   0.01    0.55     0.6 
  mean x for v3   -0.03   -0.3    1.06 
  mean x for v1   0.56    -0.27   -0.54
W                                      
  mean x for w1   -0.58   0.42    0.67 
  mean x for w3   0.56    0.69    -0.39
  mean x for w2   -1.99   -0.1    0.53 </code></pre>
<p>or, if we wanted to calculate two summaries per row split:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1">s_mean_sd &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb59-2" title="2">  <span class="kw">in_rows</span>(<span class="st">&quot;mean (sd)&quot;</span> =<span class="st"> </span><span class="kw">rcell</span>(<span class="kw">c</span>(<span class="kw">mean</span>(x), <span class="kw">sd</span>(x)), <span class="dt">format =</span> <span class="st">&quot;xx.xx (xx.xx)&quot;</span>))</a>
<a class="sourceLine" id="cb59-3" title="3">}</a>
<a class="sourceLine" id="cb59-4" title="4"></a>
<a class="sourceLine" id="cb59-5" title="5">s_range &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb59-6" title="6">  <span class="kw">in_rows</span>(<span class="st">&quot;range&quot;</span> =<span class="st"> </span><span class="kw">rcell</span>(<span class="kw">range</span>(x), <span class="dt">format =</span> <span class="st">&quot;xx.xx - xx.xx&quot;</span>))</a>
<a class="sourceLine" id="cb59-7" title="7">}</a>
<a class="sourceLine" id="cb59-8" title="8"></a>
<a class="sourceLine" id="cb59-9" title="9"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-10" title="10"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-11" title="11"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-12" title="12"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r2&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-13" title="13"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, s_mean_sd, <span class="dt">show_labels =</span> <span class="st">&quot;hidden&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-14" title="14"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, s_range, <span class="dt">show_labels =</span> <span class="st">&quot;hidden&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-15" title="15"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.</code></pre>
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
<pre><code>Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.</code></pre>
<pre><code>                      A              B              C      
-----------------------------------------------------------
U                                                          
  u3                                                       
    mean (sd)   -0.04 (1.18)    0.36 (1.41)    -0.25 (0.72)
    range        -1.8 - 1.47    -1.28 - 2.4    -0.82 - 0.56
  u1                                                       
    mean (sd)    0.86 (0.38)    0.32 (0.51)      NaN (NA)  
    range        0.59 - 1.12    -0.48 - 0.94    Inf - -Inf 
  u2                                                       
    mean (sd)   -0.28 (0.96)    0.38 (0.67)    0.08 (0.91) 
    range       -1.52 - 1.43    -0.39 - 0.82   -0.93 - 1.51
V                                                          
  v2                                                       
    mean (sd)    0.01 (0.25)    0.55 (1.14)     0.6 (0.03) 
    range       -0.16 - 0.18    -0.84 - 1.6    0.58 - 0.62 
  v3                                                       
    mean (sd)   -0.03 (0.37)    -0.3 (0.36)     1.06 (NA)  
    range       -0.41 - 0.33    -0.62 - 0.03   1.06 - 1.06 
  v1                                                       
    mean (sd)    0.56 (1.1)     -0.27 (0.73)   -0.54 (1.18)
    range       -0.16 - 2.17    -1.22 - 0.59   -1.38 - 0.29
W                                                          
  w1                                                       
    mean (sd)   -0.58 (0.85)     0.42 (NA)     0.67 (0.39) 
    range       -1.25 - 0.61    0.42 - 0.42    0.37 - 1.21 
  w3                                                       
    mean (sd)    0.56 (0.85)     0.69 (NA)     -0.39 (1.68)
    range       -0.71 - 1.98    0.69 - 0.69    -2.21 - 1.1 
  w2                                                       
    mean (sd)    -1.99 (NA)     -0.1 (0.47)     0.53 (0.6) 
    range       -1.99 - -1.99   -0.61 - 0.39   -0.1 - 1.16 </code></pre>
<p>Which has the following structure:</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U        
  u1
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u2
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u3
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
V 
  v1
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  v2
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  v3
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
W
  w1
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  w2
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  w3
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)</code></pre>
<p>The rows <code>U</code>, <code>u1</code>, <code>u2</code>, …, <code>W</code>, <code>w1</code>, <code>w2</code>, <code>w3</code> are label rows and the other rows (with <code>mean_sd</code> and <code>range</code> are data rows). Currently we do not have content rows in the table. Content rows summarize the data defined by their splitting (i.e. <code>V &gt; v1, B</code>). So if we wanted to add content row at the <code>r2</code> split level then we would get:</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U        
  u1          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u2          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u3          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
V 
  v1          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  v2          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  v3          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
W
  w1          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  w2          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  w3          s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)</code></pre>
<p>where <code>s_cfun_2</code> is the content function and either returns one row via <code>rcell</code> or multiple rows via <code>in_rows</code>. The data represented by <code>&lt;&gt;</code> for the content rows is same data as for it’s descendant, i.e. for the <code>U &gt; u1, A</code> content row cell it is <code>df %&gt;% filter(r1 == &quot;U&quot;, r2 == &quot;u1&quot;, c1 == &quot;A&quot;)</code>. Note that content functions <code>cfun</code> operate only on data frames and not on vectors/variables so they must take the <code>df</code> argument. Further, a <code>cfun</code> must also have the <code>labelstr</code> argument which is the split level. This way, the <code>cfun</code> can define its own row name. In order to get the table above we can use the layout framework as follows:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1">s_mean_sd &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb67-2" title="2">  <span class="kw">in_rows</span>(<span class="st">&quot;mean (sd)&quot;</span> =<span class="st"> </span><span class="kw">rcell</span>(<span class="kw">c</span>(<span class="kw">mean</span>(x), <span class="kw">sd</span>(x)), <span class="dt">format =</span> <span class="st">&quot;xx.xx (xx.xx)&quot;</span>))</a>
<a class="sourceLine" id="cb67-3" title="3">}</a>
<a class="sourceLine" id="cb67-4" title="4"></a>
<a class="sourceLine" id="cb67-5" title="5">s_range &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb67-6" title="6">  <span class="kw">in_rows</span>(<span class="st">&quot;range&quot;</span> =<span class="st"> </span><span class="kw">rcell</span>(<span class="kw">range</span>(x), <span class="dt">format =</span> <span class="st">&quot;xx.xx - xx.xx&quot;</span>))</a>
<a class="sourceLine" id="cb67-7" title="7">}</a>
<a class="sourceLine" id="cb67-8" title="8"></a>
<a class="sourceLine" id="cb67-9" title="9">s_cfun_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="cf">function</span>(df, labelstr) {</a>
<a class="sourceLine" id="cb67-10" title="10">  <span class="kw">rcell</span>(<span class="kw">nrow</span>(df), <span class="dt">format =</span> <span class="st">&quot;xx&quot;</span>, <span class="dt">label =</span> <span class="kw">paste</span>(labelstr, <span class="st">&quot;(n)&quot;</span>))</a>
<a class="sourceLine" id="cb67-11" title="11">}</a>
<a class="sourceLine" id="cb67-12" title="12"></a>
<a class="sourceLine" id="cb67-13" title="13"></a>
<a class="sourceLine" id="cb67-14" title="14"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-15" title="15"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-16" title="16"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-17" title="17"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r2&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-18" title="18"><span class="st">  </span><span class="kw">summarize_row_groups</span>(<span class="dt">cfun =</span> s_cfun_<span class="dv">2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-19" title="19"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, s_mean_sd, <span class="dt">show_labels =</span> <span class="st">&quot;hidden&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-20" title="20"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, s_range, <span class="dt">show_labels =</span> <span class="st">&quot;hidden&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-21" title="21"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.</code></pre>
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
<pre><code>Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.</code></pre>
<pre><code>                      A              B              C      
-----------------------------------------------------------
U                                                          
  u3 (n)              6              5              3      
    mean (sd)   -0.04 (1.18)    0.36 (1.41)    -0.25 (0.72)
    range        -1.8 - 1.47    -1.28 - 2.4    -0.82 - 0.56
  u1 (n)              2              5              0      
    mean (sd)    0.86 (0.38)    0.32 (0.51)      NaN (NA)  
    range        0.59 - 1.12    -0.48 - 0.94    Inf - -Inf 
  u2 (n)              9              3              7      
    mean (sd)   -0.28 (0.96)    0.38 (0.67)    0.08 (0.91) 
    range       -1.52 - 1.43    -0.39 - 0.82   -0.93 - 1.51
V                                                          
  v2 (n)              2              4              2      
    mean (sd)    0.01 (0.25)    0.55 (1.14)     0.6 (0.03) 
    range       -0.16 - 0.18    -0.84 - 1.6    0.58 - 0.62 
  v3 (n)              3              4              1      
    mean (sd)   -0.03 (0.37)    -0.3 (0.36)     1.06 (NA)  
    range       -0.41 - 0.33    -0.62 - 0.03   1.06 - 1.06 
  v1 (n)              4              7              2      
    mean (sd)    0.56 (1.1)     -0.27 (0.73)   -0.54 (1.18)
    range       -0.16 - 2.17    -1.22 - 0.59   -1.38 - 0.29
W                                                          
  w1 (n)              4              1              4      
    mean (sd)   -0.58 (0.85)     0.42 (NA)     0.67 (0.39) 
    range       -1.25 - 0.61    0.42 - 0.42    0.37 - 1.21 
  w3 (n)              9              1              3      
    mean (sd)    0.56 (0.85)     0.69 (NA)     -0.39 (1.68)
    range       -0.71 - 1.98    0.69 - 0.69    -2.21 - 1.1 
  w2 (n)              1              4              4      
    mean (sd)    -1.99 (NA)     -0.1 (0.47)     0.53 (0.6) 
    range       -1.99 - -1.99   -0.61 - 0.39   -0.1 - 1.16 </code></pre>
<p>In the same manner, if we wanted content rows for <code>r1</code> split we can do it at as follows:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1"><span class="kw">basic_table</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-2" title="2"><span class="st">  </span><span class="kw">split_cols_by</span>(<span class="st">&quot;c1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-3" title="3"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-4" title="4"><span class="st">  </span><span class="kw">summarize_row_groups</span>(<span class="dt">cfun =</span> s_cfun_<span class="dv">2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-5" title="5"><span class="st">  </span><span class="kw">split_rows_by</span>(<span class="st">&quot;r2&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-6" title="6"><span class="st">  </span><span class="kw">summarize_row_groups</span>(<span class="dt">cfun =</span> s_cfun_<span class="dv">2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-7" title="7"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, s_mean_sd, <span class="dt">show_labels =</span> <span class="st">&quot;hidden&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-8" title="8"><span class="st">  </span><span class="kw">analyze</span>(<span class="st">&quot;x&quot;</span>, s_range, <span class="dt">show_labels =</span> <span class="st">&quot;hidden&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-9" title="9"><span class="st">  </span><span class="kw">build_table</span>(df)</a></code></pre></div>
<pre><code>Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.</code></pre>
<pre><code>Warning in min(x): no non-missing arguments to min; returning Inf</code></pre>
<pre><code>Warning in max(x): no non-missing arguments to max; returning -Inf</code></pre>
<pre><code>Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.

Warning in .make_split_kids(spl = spl, df = df, lvl = lvl, splvec = splvec, :
Non-unique sibling analysis table names. Using Labels instead. Use the
table_names argument to analyze to avoid this when analyzing the same variable
multiple times.</code></pre>
<pre><code>                      A              B              C      
-----------------------------------------------------------
U (n)                17              13             10     
  u3 (n)              6              5              3      
    mean (sd)   -0.04 (1.18)    0.36 (1.41)    -0.25 (0.72)
    range        -1.8 - 1.47    -1.28 - 2.4    -0.82 - 0.56
  u1 (n)              2              5              0      
    mean (sd)    0.86 (0.38)    0.32 (0.51)      NaN (NA)  
    range        0.59 - 1.12    -0.48 - 0.94    Inf - -Inf 
  u2 (n)              9              3              7      
    mean (sd)   -0.28 (0.96)    0.38 (0.67)    0.08 (0.91) 
    range       -1.52 - 1.43    -0.39 - 0.82   -0.93 - 1.51
V (n)                 9              15             5      
  v2 (n)              2              4              2      
    mean (sd)    0.01 (0.25)    0.55 (1.14)     0.6 (0.03) 
    range       -0.16 - 0.18    -0.84 - 1.6    0.58 - 0.62 
  v3 (n)              3              4              1      
    mean (sd)   -0.03 (0.37)    -0.3 (0.36)     1.06 (NA)  
    range       -0.41 - 0.33    -0.62 - 0.03   1.06 - 1.06 
  v1 (n)              4              7              2      
    mean (sd)    0.56 (1.1)     -0.27 (0.73)   -0.54 (1.18)
    range       -0.16 - 2.17    -1.22 - 0.59   -1.38 - 0.29
W (n)                14              6              11     
  w1 (n)              4              1              4      
    mean (sd)   -0.58 (0.85)     0.42 (NA)     0.67 (0.39) 
    range       -1.25 - 0.61    0.42 - 0.42    0.37 - 1.21 
  w3 (n)              9              1              3      
    mean (sd)    0.56 (0.85)     0.69 (NA)     -0.39 (1.68)
    range       -0.71 - 1.98    0.69 - 0.69    -2.21 - 1.1 
  w2 (n)              1              4              4      
    mean (sd)    -1.99 (NA)     -0.1 (0.47)     0.53 (0.6) 
    range       -1.99 - -1.99   -0.61 - 0.39   -0.1 - 1.16 </code></pre>
<p>In pagination content rows and label rows get repeated if a page is split in a descendant of a content row. So for example, if we were to split the following table at <code>***</code> then :</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U        
  u1 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
***
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u2 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)</code></pre>
<p>we would get the following two tables:</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U        
  u1 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)</code></pre>
<p>and</p>
<pre><code>                   A              B              C
---------------------------------------------------------
U        
  u1 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)
  u2 (n)      s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)   s_cfun_2(&lt;&gt;)
     mean_sd  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)  s_mean_sd(&lt;&gt;)
     range    s_range(&lt;&gt;)    s_range(&lt;&gt;)    s_range(&lt;&gt;)</code></pre>
</div>
<div id="pattern-iii" class="section level3">
<h3>Pattern III</h3>
<p>Let’s consider the following tabulation pattern:</p>
<pre><code>                     A         B         C
------------------------------------------------
label 1        foo(x_A)  bar(x_B)  zoo(x_C)
label 2        foo(x_A)  bar(x_B)  zoo(x_C)
label 3        foo(x_A)  bar(x_B)  zoo(x_C)</code></pre>
<p>We will discuss that in a future release of <code>rtables</code>.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
