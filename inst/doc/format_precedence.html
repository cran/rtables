<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Wojciech Wójciak and Gabriel Becker" />

<meta name="date" content="2023-08-30" />

<title>Format Precedence and NA Handling</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Format Precedence and NA Handling</h1>
<h4 class="author">Wojciech Wójciak and Gabriel Becker</h4>
<h4 class="date">2023-08-30</h4>



<style type="text/css">
.reveal .r code {
white-space: pre;
}
</style>
<div id="formats-precedence" class="section level2">
<h2>Formats Precedence</h2>
<p>Users of the <code>rtables</code> package can specify the format in
which the numbers in the reporting tables are printed. Formatting
functionality is provided by the <a href="https://insightsengineering.github.io/formatters/"><code>formatters</code></a>
R package. See <code>formatters::list_valid_format_labels()</code> for a
list of all available formats. The format can be specified by the user
in a few different places. It may happen that, for a single table
layout, the format is specified in more than one place. In such a case,
the final format that will be applied depends on format precedence rules
defined by <code>rtables</code>. In this vignette, we describe the basic
rules of <code>rtables</code> format precedence.</p>
<p>The examples shown in this vignette utilize the example
<code>ADSL</code> dataset, a demographic table that summarizes the
variables content for different population subsets (encoded in the
columns).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(rtables)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>ADSL <span class="ot">&lt;-</span> ex_adsl</span></code></pre></div>
<p>Note that all <code>ex_*</code> data which is currently attached to
the <code>rtables</code> package is provided by the <a href="https://insightsengineering.github.io/formatters/"><code>formatters</code></a>
package and was created using the publicly available <a href="https://insightsengineering.github.io/random.cdisc.data/"><code>random.cdisc.data</code></a>
R package.</p>
<div id="format-precedence-and-inheritance-rules" class="section level3">
<h3>Format Precedence and Inheritance Rules</h3>
<p>The format in which numbers are printed can be specified by the user
in a few different places. In the context of precedence, it is important
which level of the split hierarchy formats are specified at. In general,
there are two such levels: the <strong>cell</strong> level and the
so-called <strong>parent table</strong> level. The concept of the cell
and the parent table results from the way in which the
<code>rtables</code> package stores resulting tables. It models the
resulting tables as hierarchical, tree-like objects with the cells (as
leaves) containing multiple values. Particularly noteworthy in this
context is the fact that the actual table splitting occurs in a
row-dominant way (even if column splitting is present in the layout).
<code>rtables</code> provides user-end function
<code>table_structure()</code> that prints the structure of a given
table object.</p>
<p>For a simple illustration, consider the following example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>lyt <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="fu">split_rows_by</span>(<span class="st">&quot;SEX&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> mean)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>adsl_analyzed <span class="ot">&lt;-</span> <span class="fu">build_table</span>(lyt, ADSL)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>adsl_analyzed</span></code></pre></div>
<pre><code>#                       A: Drug X          B: Placebo       C: Combination 
# —————————————————————————————————————————————————————————————————————————
# F                                                                        
#   mean             32.7594936708861   34.1168831168831   35.1969696969697
# M                                                                        
#   mean             35.5686274509804   37.4363636363636   35.3833333333333
# U                                                                        
#   mean             31.6666666666667          31               35.25      
# UNDIFFERENTIATED                                                         
#   mean                    28                 NA                 45</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">table_structure</span>(adsl_analyzed)</span></code></pre></div>
<pre><code># [TableTree] SEX
#  [TableTree] F
#   [ElementaryTable] AGE (1 x 3)
#  [TableTree] M
#   [ElementaryTable] AGE (1 x 3)
#  [TableTree] U
#   [ElementaryTable] AGE (1 x 3)
#  [TableTree] UNDIFFERENTIATED
#   [ElementaryTable] AGE (1 x 3)</code></pre>
<p>In this table, there are 4 sub-tables under the <code>SEX</code>
table. These are: <code>F</code>, <code>M</code>, <code>U</code>, and
<code>UNDIFFERENTIATED</code>. Each of these sub-tables has one
sub-table <code>AGE</code>. For example, for the first <code>AGE</code>
sub-table, its parent table is <code>F</code>.</p>
<p>The concept of hierarchical, tree-like representations of resulting
tables translates directly to format precedence and inheritance rules.
As a general principle, the format being finally applied for the cell is
the one that is the most specific, that is, the one which is the closest
to the cell in a given path in the tree. Hence, the
precedence-inheritance chain looks like the following:</p>
<pre><code>parent_table -&gt; parent_table -&gt; ... -&gt; parent_table -&gt; cell</code></pre>
<p>In such a chain, the outermost <code>parent_table</code> is the least
specific place to specify the format, while the <code>cell</code> is the
most specific one. In cases where the format is specified by the user in
more than one place, the one which is most specific will be applied in
the cell. If no specific format has been selected by the user for the
split, then the default format will be applied. The default format is
<code>&quot;xx&quot;</code> and it yields the same formatting as the
<code>as.character()</code> function. In the following sections of this
vignette, we will illustrate the format precedence rules with a few
examples.</p>
</div>
<div id="standard-format" class="section level3">
<h3>Standard Format</h3>
<p>Below is a simple layout that does not explicitly set a format for
the output of the analysis function. In such a case, the default format
is applied.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>lyt0 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> mean)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">build_table</span>(lyt0, ADSL)</span></code></pre></div>
<pre><code>#           A: Drug X          B: Placebo       C: Combination 
# —————————————————————————————————————————————————————————————
# mean   33.7686567164179   35.4328358208955   35.4318181818182</code></pre>
</div>
<div id="cell-format" class="section level3">
<h3>Cell Format</h3>
<p>The format of a cell can be explicitly specified via the
<code>rcell()</code> or <code>in_rows()</code> functions. The former is
essentially a collection of data objects while the latter is a
collection of <code>rcell()</code> objects. As previously mentioned,
this is the most specific place where the format can be specified by the
user.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>lyt1 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="fu">rcell</span>(<span class="fu">mean</span>(x), <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Mean&quot;</span>)</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  })</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="fu">build_table</span>(lyt1, ADSL)</span></code></pre></div>
<pre><code>#        A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————
# Mean     33.77       35.43          35.43</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>lyt1a <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>    <span class="fu">in_rows</span>(</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>      <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">mean</span>(x)),</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>      <span class="at">.formats =</span> <span class="st">&quot;xx.xx&quot;</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>    )</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>  })</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="fu">build_table</span>(lyt1a, ADSL)</span></code></pre></div>
<pre><code>#        A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————
# Mean     33.77       35.43          35.43</code></pre>
<p>If the format is specified in both of these places at the same time,
the one specified via <code>in_rows()</code> takes highest precedence.
Technically, in this case, the format defined in <code>rcell()</code>
will simply be overwritten by the one defined in <code>in_rows()</code>.
This is because the format specified in <code>in_rows()</code> is
applied to the cells not the rows (overriding the previously specified
cell-specific values), which indicates that the precedence rules
described above are still in place.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>lyt2 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="fu">in_rows</span>(</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>      <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">mean</span>(x), <span class="at">format =</span> <span class="st">&quot;xx.xxx&quot;</span>),</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>      <span class="at">.formats =</span> <span class="st">&quot;xx.xx&quot;</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    )</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>  })</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="fu">build_table</span>(lyt2, ADSL)</span></code></pre></div>
<pre><code>#        A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————
# Mean     33.77       35.43          35.43</code></pre>
</div>
<div id="parent-table-format-and-inheritance" class="section level3">
<h3>Parent Table Format and Inheritance</h3>
<p>In addition to the cell level, the format can be specified at the
parent table level. If no format has been set by the user for a cell,
the most specific format for that cell is the one defined at its
innermost parent table split (if any).</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>lyt3 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, mean, <span class="at">format =</span> <span class="st">&quot;xx.x&quot;</span>)</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="fu">build_table</span>(lyt3, ADSL)</span></code></pre></div>
<pre><code>#        A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————
# mean     33.8         35.4           35.4</code></pre>
<p>If the cell format is also specified for a cell, then the parent
table format is ignored for this cell since the cell format is more
specific and therefore takes precedence.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>lyt4 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>  <span class="fu">analyze</span>(</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>      <span class="fu">rcell</span>(<span class="fu">mean</span>(x), <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Mean&quot;</span>)</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    },</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    <span class="at">format =</span> <span class="st">&quot;xx.x&quot;</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>  )</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="fu">build_table</span>(lyt4, ADSL)</span></code></pre></div>
<pre><code>#        A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————
# Mean     33.77       35.43          35.43</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>lyt4a <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="fu">analyze</span>(</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    <span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>      <span class="fu">in_rows</span>(</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>        <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">mean</span>(x)),</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>        <span class="st">&quot;SD&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">sd</span>(x)),</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>        <span class="at">.formats =</span> <span class="st">&quot;xx.xx&quot;</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>      )</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a>    },</span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a>    <span class="at">format =</span> <span class="st">&quot;xx.x&quot;</span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a>  )</span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="fu">build_table</span>(lyt4a, ADSL)</span></code></pre></div>
<pre><code>#        A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————
# Mean     33.77       35.43          35.43     
# SD       6.55         7.90           7.72</code></pre>
<p>In the following, slightly more complicated, example, we can observe
partial inheritance. That is, only <code>SD</code> cells inherit the
parent table’s format while the <code>Mean</code> cells do not.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>lyt5 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="fu">analyze</span>(</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>      <span class="fu">in_rows</span>(</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>        <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">mean</span>(x), <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>),</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>        <span class="st">&quot;SD&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">sd</span>(x))</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>      )</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>    },</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>    <span class="at">format =</span> <span class="st">&quot;xx.x&quot;</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>  )</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a><span class="fu">build_table</span>(lyt5, ADSL)</span></code></pre></div>
<pre><code>#        A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————
# Mean     33.77       35.43          35.43     
# SD        6.6         7.9            7.7</code></pre>
</div>
</div>
<div id="na-handling" class="section level2">
<h2><code>NA</code> Handling</h2>
<p>Consider the following layout and the resulting table created:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>lyt6 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  <span class="fu">split_rows_by</span>(<span class="st">&quot;SEX&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> mean, <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>)</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="fu">build_table</span>(lyt6, ADSL)</span></code></pre></div>
<pre><code>#                    A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————————————————
# F                                                         
#   mean               32.76       34.12          35.20     
# M                                                         
#   mean               35.57       37.44          35.38     
# U                                                         
#   mean               31.67       31.00          35.25     
# UNDIFFERENTIATED                                          
#   mean               28.00         NA           45.00</code></pre>
<p>In the output the cell corresponding to the
<code>UNDIFFERENTIATED</code> level of <code>SEX</code> and the
<code>B: Placebo</code> level of <code>ARM</code> is displayed as
<code>NA</code>. This occurs because there were no non-<code>NA</code>
values under this facet that could be used to compute the mean.
<code>rtables</code> allows the user to specify a string to display when
cell values are <code>NA</code>. Similar to formats for numbers, the
user can specify a string to replace <code>NA</code> with the parameter
<code>format_na_str</code> or <code>.format_na_str</code>. This can be
specified at the cell or parent table level. <code>NA</code> string
precedence and inheritance rules are the same as those for number format
precedence, described in the previous section of this vignette. We will
illustrate this with a few examples.</p>
<div id="replacing-na-values-at-the-cell-level" class="section level3">
<h3>Replacing <code>NA</code> Values at the Cell Level</h3>
<p>At the cell level, it is possible to replace <code>NA</code> values
with a custom string by means of the <code>format_na_str</code>
parameter in <code>rcell()</code> or <code>.format_na_str</code>
parameter in <code>in_rows()</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>lyt7 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>  <span class="fu">split_rows_by</span>(<span class="st">&quot;SEX&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>    <span class="fu">rcell</span>(<span class="fu">mean</span>(x), <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Mean&quot;</span>, <span class="at">format_na_str =</span> <span class="st">&quot;&lt;missing&gt;&quot;</span>)</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>  })</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="fu">build_table</span>(lyt7, ADSL)</span></code></pre></div>
<pre><code>#                    A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————————————————
# F                                                         
#   Mean               32.76       34.12          35.20     
# M                                                         
#   Mean               35.57       37.44          35.38     
# U                                                         
#   Mean               31.67       31.00          35.25     
# UNDIFFERENTIATED                                          
#   Mean               28.00     &lt;missing&gt;        45.00</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>lyt7a <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>  <span class="fu">split_rows_by</span>(<span class="st">&quot;SEX&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>    <span class="fu">in_rows</span>(</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a>      <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">mean</span>(x), <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>),</span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a>      <span class="at">.format_na_strs =</span> <span class="st">&quot;&lt;MISSING&gt;&quot;</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a>    )</span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a>  })</span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a><span class="fu">build_table</span>(lyt7a, ADSL)</span></code></pre></div>
<pre><code>#                    A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————————————————
# F                                                         
#   Mean               32.76       34.12          35.20     
# M                                                         
#   Mean               35.57       37.44          35.38     
# U                                                         
#   Mean               31.67       31.00          35.25     
# UNDIFFERENTIATED                                          
#   Mean               28.00     &lt;MISSING&gt;        45.00</code></pre>
<p>If the <code>NA</code> string is specified in both of these places at
the same time, the one specified with <code>in_rows()</code> takes
precedence. Technically, in this case the <code>NA</code> replacement
string defined in <code>rcell()</code> will simply be overwritten by the
one defined in <code>in_rows()</code>. This is because the
<code>NA</code> string specified in <code>in_rows()</code> is applied to
the cells, not the rows (overriding the previously specified cell
specific values), which means that the precedence rules described above
are still in place.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>lyt8 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>  <span class="fu">split_rows_by</span>(<span class="st">&quot;SEX&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    <span class="fu">in_rows</span>(</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>      <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">mean</span>(x), <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>, <span class="at">format_na_str =</span> <span class="st">&quot;&lt;missing&gt;&quot;</span>),</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>      <span class="at">.format_na_strs =</span> <span class="st">&quot;&lt;MISSING&gt;&quot;</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a>    )</span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a>  })</span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a><span class="fu">build_table</span>(lyt8, ADSL)</span></code></pre></div>
<pre><code>#                    A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————————————————
# F                                                         
#   Mean               32.76       34.12          35.20     
# M                                                         
#   Mean               35.57       37.44          35.38     
# U                                                         
#   Mean               31.67       31.00          35.25     
# UNDIFFERENTIATED                                          
#   Mean               28.00     &lt;MISSING&gt;        45.00</code></pre>
</div>
<div id="parent-table-replacement-of-na-values-and-inheritance-principles" class="section level3">
<h3>Parent Table Replacement of <code>NA</code> Values and Inheritance
Principles</h3>
<p>In addition to the cell level, the string replacement for
<code>NA</code> values can be specified at the parent table level. If no
replacement string has been specified by the user for a cell, the most
specific <code>NA</code> string for that cell is the one defined at its
innermost parent table split (if any).</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>lyt9 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>  <span class="fu">split_rows_by</span>(<span class="st">&quot;SEX&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>  <span class="fu">analyze</span>(<span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, mean, <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>, <span class="at">na_str =</span> <span class="st">&quot;not available&quot;</span>)</span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="fu">build_table</span>(lyt9, ADSL)</span></code></pre></div>
<pre><code>#                    A: Drug X    B: Placebo     C: Combination
# —————————————————————————————————————————————————————————————
# F                                                            
#   mean               32.76         34.12           35.20     
# M                                                            
#   mean               35.57         37.44           35.38     
# U                                                            
#   mean               31.67         31.00           35.25     
# UNDIFFERENTIATED                                             
#   mean               28.00     not available       45.00</code></pre>
<p>If an <code>NA</code> value replacement string was also specified at
the cell level, then the one set at the parent table level is ignored
for this cell as the cell level format is more specific and therefore
takes precedence.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>lyt10 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>  <span class="fu">split_rows_by</span>(<span class="st">&quot;SEX&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>  <span class="fu">analyze</span>(</span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>    <span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a>      <span class="fu">rcell</span>(<span class="fu">mean</span>(x), <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Mean&quot;</span>, <span class="at">format_na_str =</span> <span class="st">&quot;&lt;missing&gt;&quot;</span>)</span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a>    },</span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a>    <span class="at">na_str =</span> <span class="st">&quot;not available&quot;</span></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a>  )</span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a><span class="fu">build_table</span>(lyt10, ADSL)</span></code></pre></div>
<pre><code>#                    A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————————————————
# F                                                         
#   Mean               32.76       34.12          35.20     
# M                                                         
#   Mean               35.57       37.44          35.38     
# U                                                         
#   Mean               31.67       31.00          35.25     
# UNDIFFERENTIATED                                          
#   Mean               28.00     &lt;missing&gt;        45.00</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>lyt10a <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>  <span class="fu">split_rows_by</span>(<span class="st">&quot;SEX&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>  <span class="fu">analyze</span>(</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>    <span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>      <span class="fu">in_rows</span>(</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>        <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">mean</span>(x)),</span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>        <span class="st">&quot;SD&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">sd</span>(x)),</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a>        <span class="at">.formats =</span> <span class="st">&quot;xx.xx&quot;</span>,</span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>        <span class="at">.format_na_strs =</span> <span class="st">&quot;&lt;missing&gt;&quot;</span></span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a>      )</span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a>    },</span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a>    <span class="at">na_str =</span> <span class="st">&quot;not available&quot;</span></span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a>  )</span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a><span class="fu">build_table</span>(lyt10a, ADSL)</span></code></pre></div>
<pre><code>#                    A: Drug X   B: Placebo   C: Combination
# ——————————————————————————————————————————————————————————
# F                                                         
#   Mean               32.76       34.12          35.20     
#   SD                 6.09         7.06           7.43     
# M                                                         
#   Mean               35.57       37.44          35.38     
#   SD                 7.08         8.69           8.24     
# U                                                         
#   Mean               31.67       31.00          35.25     
#   SD                 3.21         5.66           3.10     
# UNDIFFERENTIATED                                          
#   Mean               28.00     &lt;missing&gt;        45.00     
#   SD               &lt;missing&gt;   &lt;missing&gt;         1.41</code></pre>
<p>In the following, slightly more complicated example, we can observe
partial inheritance of NA strings. That is, only <code>SD</code> cells
inherit the parent table’s <code>NA</code> string, while the
<code>Mean</code> cells do not.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>lyt11 <span class="ot">&lt;-</span> <span class="fu">basic_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>  <span class="fu">split_cols_by</span>(<span class="st">&quot;ARM&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>  <span class="fu">split_rows_by</span>(<span class="st">&quot;SEX&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>  <span class="fu">analyze</span>(</span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a>    <span class="at">vars =</span> <span class="st">&quot;AGE&quot;</span>, <span class="at">afun =</span> <span class="cf">function</span>(x) {</span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a>      <span class="fu">in_rows</span>(</span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a>        <span class="st">&quot;Mean&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">mean</span>(x), <span class="at">format_na_str =</span> <span class="st">&quot;&lt;missing&gt;&quot;</span>),</span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a>        <span class="st">&quot;SD&quot;</span> <span class="ot">=</span> <span class="fu">rcell</span>(<span class="fu">sd</span>(x))</span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a>      )</span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a>    },</span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a>    <span class="at">format =</span> <span class="st">&quot;xx.xx&quot;</span>,</span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a>    <span class="at">na_str =</span> <span class="st">&quot;not available&quot;</span></span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a>  )</span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a></span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a><span class="fu">build_table</span>(lyt11, ADSL)</span></code></pre></div>
<pre><code>#                      A: Drug X      B: Placebo     C: Combination
# —————————————————————————————————————————————————————————————————
# F                                                                
#   Mean                 32.76           34.12           35.20     
#   SD                   6.09            7.06             7.43     
# M                                                                
#   Mean                 35.57           37.44           35.38     
#   SD                   7.08            8.69             8.24     
# U                                                                
#   Mean                 31.67           31.00           35.25     
#   SD                   3.21            5.66             3.10     
# UNDIFFERENTIATED                                                 
#   Mean                 28.00         &lt;missing&gt;         45.00     
#   SD               not available   not available        1.41</code></pre>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
